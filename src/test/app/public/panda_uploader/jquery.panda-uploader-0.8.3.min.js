var a,swfobject=function(){function b(){if(!D){try{var c=p.getElementsByTagName("body")[0].appendChild(z("span"));c.parentNode.removeChild(c)}catch(e){return}D=true;c=L.length;for(var g=0;g<c;g++)L[g]()}}function d(c){if(D)c();else L[L.length]=c}function h(c){if(typeof u.addEventListener!=q)u.addEventListener("load",c,false);else if(typeof p.addEventListener!=q)p.addEventListener("load",c,false);else if(typeof u.attachEvent!=q)ga(u,"onload",c);else if(typeof u.onload=="function"){var e=u.onload;u.onload=
function(){e();c()}}else u.onload=c}function m(){Z?f():l()}function f(){var c=p.getElementsByTagName("body")[0],e=z(w);e.setAttribute("type",M);var g=c.appendChild(e);if(g){var i=0;(function(){if(typeof g.GetVariable!=q){var j=g.GetVariable("$version");if(j){j=j.split(" ")[1].split(",");k.pv=[parseInt(j[0],10),parseInt(j[1],10),parseInt(j[2],10)]}}else if(i<10){i++;setTimeout(arguments.callee,10);return}c.removeChild(e);g=null;l()})()}else l()}function l(){var c=A.length;if(c>0)for(var e=0;e<c;e++){var g=
A[e].id,i=A[e].callbackFn,j={success:false,id:g};if(k.pv[0]>0){var n=v(g);if(n)if(N(A[e].swfVersion)&&!(k.wk&&k.wk<312)){E(g,true);if(i){j.success=true;j.ref=s(g);i(j)}}else if(A[e].expressInstall&&G()){j={};j.data=A[e].expressInstall;j.width=n.getAttribute("width")||"0";j.height=n.getAttribute("height")||"0";if(n.getAttribute("class"))j.styleclass=n.getAttribute("class");if(n.getAttribute("align"))j.align=n.getAttribute("align");var o={};n=n.getElementsByTagName("param");for(var r=n.length,t=0;t<
r;t++)if(n[t].getAttribute("name").toLowerCase()!="movie")o[n[t].getAttribute("name")]=n[t].getAttribute("value");O(j,o,g,i)}else{P(n);i&&i(j)}}else{E(g,true);if(i){if((g=s(g))&&typeof g.SetVariable!=q){j.success=true;j.ref=g}i(j)}}}}function s(c){var e=null;if((c=v(c))&&c.nodeName=="OBJECT")if(typeof c.SetVariable!=q)e=c;else if(c=c.getElementsByTagName(w)[0])e=c;return e}function G(){return!Q&&N("6.0.65")&&(k.win||k.mac)&&!(k.wk&&k.wk<312)}function O(c,e,g,i){Q=true;W=i||null;aa={success:false,
id:g};var j=v(g);if(j){if(j.nodeName=="OBJECT"){I=J(j);R=null}else{I=j;R=g}c.id=ba;if(typeof c.width==q||!/%$/.test(c.width)&&parseInt(c.width,10)<310)c.width="310";if(typeof c.height==q||!/%$/.test(c.height)&&parseInt(c.height,10)<137)c.height="137";p.title=p.title.slice(0,47)+" - Flash Player Installation";i=k.ie&&k.win?"ActiveX":"PlugIn";i="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+i+"&MMdoctitle="+p.title;if(typeof e.flashvars!=q)e.flashvars+="&"+i;else e.flashvars=
i;if(k.ie&&k.win&&j.readyState!=4){i=z("div");g+="SWFObjectNew";i.setAttribute("id",g);j.parentNode.insertBefore(i,j);j.style.display="none";(function(){j.readyState==4?j.parentNode.removeChild(j):setTimeout(arguments.callee,10)})()}F(c,e,g)}}function P(c){if(k.ie&&k.win&&c.readyState!=4){var e=z("div");c.parentNode.insertBefore(e,c);e.parentNode.replaceChild(J(c),e);c.style.display="none";(function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)})()}else c.parentNode.replaceChild(J(c),
c)}function J(c){var e=z("div");if(k.win&&k.ie)e.innerHTML=c.innerHTML;else if(c=c.getElementsByTagName(w)[0])if(c=c.childNodes)for(var g=c.length,i=0;i<g;i++)!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&c[i].nodeType!=8&&e.appendChild(c[i].cloneNode(true));return e}function F(c,e,g){var i,j=v(g);if(k.wk&&k.wk<312)return i;if(j){if(typeof c.id==q)c.id=g;if(k.ie&&k.win){var n="";for(var o in c)if(c[o]!=Object.prototype[o])if(o.toLowerCase()=="data")e.movie=c[o];else if(o.toLowerCase()=="styleclass")n+=
' class="'+c[o]+'"';else if(o.toLowerCase()!="classid")n+=" "+o+'="'+c[o]+'"';o="";for(var r in e)if(e[r]!=Object.prototype[r])o+='<param name="'+r+'" value="'+e[r]+'" />';j.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+n+">"+o+"</object>";S[S.length]=c.id;i=v(c.id)}else{r=z(w);r.setAttribute("type",M);for(n in c)if(c[n]!=Object.prototype[n])if(n.toLowerCase()=="styleclass")r.setAttribute("class",c[n]);else n.toLowerCase()!="classid"&&r.setAttribute(n,c[n]);for(var t in e)e[t]!=
Object.prototype[t]&&t.toLowerCase()!="movie"&&X(r,t,e[t]);j.parentNode.replaceChild(r,j);i=r}}return i}function X(c,e,g){var i=z("param");i.setAttribute("name",e);i.setAttribute("value",g);c.appendChild(i)}function ca(c){var e=v(c);if(e&&e.nodeName=="OBJECT")if(k.ie&&k.win){e.style.display="none";(function(){e.readyState==4?ha(c):setTimeout(arguments.callee,10)})()}else e.parentNode.removeChild(e)}function ha(c){if(c=v(c)){for(var e in c)if(typeof c[e]=="function")c[e]=null;c.parentNode.removeChild(c)}}
function v(c){var e=null;try{e=p.getElementById(c)}catch(g){}return e}function z(c){return p.createElement(c)}function ga(c,e,g){c.attachEvent(e,g);H[H.length]=[c,e,g]}function N(c){var e=k.pv;c=c.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return e[0]>c[0]||e[0]==c[0]&&e[1]>c[1]||e[0]==c[0]&&e[1]==c[1]&&e[2]>=c[2]?true:false}function da(c,e,g,i){if(!(k.ie&&k.mac)){var j=p.getElementsByTagName("head")[0];if(j){g=g&&typeof g=="string"?g:"screen";if(i)Y=x=null;
if(!x||Y!=g){i=z("style");i.setAttribute("type","text/css");i.setAttribute("media",g);x=j.appendChild(i);if(k.ie&&k.win&&typeof p.styleSheets!=q&&p.styleSheets.length>0)x=p.styleSheets[p.styleSheets.length-1];Y=g}if(k.ie&&k.win)x&&typeof x.addRule==w&&x.addRule(c,e);else x&&typeof p.createTextNode!=q&&x.appendChild(p.createTextNode(c+" {"+e+"}"))}}}function E(c,e){if(ea){e=e?"visible":"hidden";if(D&&v(c))v(c).style.visibility=e;else da("#"+c,"visibility:"+e)}}function fa(c){return/[\\\"<>\.;]/.exec(c)!=
null&&typeof encodeURIComponent!=q?encodeURIComponent(c):c}var q="undefined",w="object",M="application/x-shockwave-flash",ba="SWFObjectExprInst",u=window,p=document,B=navigator,Z=false,L=[m],A=[],S=[],H=[],I,R,W,aa,D=false,Q=false,x,Y,ea=true,k=function(){var c=typeof p.getElementById!=q&&typeof p.getElementsByTagName!=q&&typeof p.createElement!=q,e=B.userAgent.toLowerCase(),g=B.platform.toLowerCase(),i=g?/win/.test(g):/win/.test(e);g=g?/mac/.test(g):/mac/.test(e);e=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,
"$1")):false;var j=!+"\u000b1",n=[0,0,0],o=null;if(typeof B.plugins!=q&&typeof B.plugins["Shockwave Flash"]==w){if((o=B.plugins["Shockwave Flash"].description)&&!(typeof B.mimeTypes!=q&&B.mimeTypes[M]&&!B.mimeTypes[M].enabledPlugin)){Z=true;j=false;o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1");n[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10);n[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10);n[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof u.ActiveXObject!=q)try{var r=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(r)if(o=r.GetVariable("$version")){j=true;o=o.split(" ")[1].split(",");n=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)]}}catch(t){}return{w3:c,pv:n,wk:e,ie:j,win:i,mac:g}}();(function(){if(k.w3){if(typeof p.readyState!=q&&p.readyState=="complete"||typeof p.readyState==q&&(p.getElementsByTagName("body")[0]||p.body))b();if(!D){typeof p.addEventListener!=q&&p.addEventListener("DOMContentLoaded",b,false);if(k.ie&&k.win){p.attachEvent("onreadystatechange",
function(){if(p.readyState=="complete"){p.detachEvent("onreadystatechange",arguments.callee);b()}});u==top&&function(){if(!D){try{p.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}b()}}()}k.wk&&function(){D||(/loaded|complete/.test(p.readyState)?b():setTimeout(arguments.callee,0))}();h(b)}}})();(function(){k.ie&&k.win&&window.attachEvent("onunload",function(){for(var c=H.length,e=0;e<c;e++)H[e][0].detachEvent(H[e][1],H[e][2]);c=S.length;for(e=0;e<c;e++)ca(S[e]);for(var g in k)k[g]=
null;k=null;for(var i in swfobject)swfobject[i]=null;swfobject=null})})();return{registerObject:function(c,e,g,i){if(k.w3&&c&&e){var j={};j.id=c;j.swfVersion=e;j.expressInstall=g;j.callbackFn=i;A[A.length]=j;E(c,false)}else i&&i({success:false,id:c})},getObjectById:function(c){if(k.w3)return s(c)},embedSWF:function(c,e,g,i,j,n,o,r,t,K){var T={success:false,id:e};if(k.w3&&!(k.wk&&k.wk<312)&&c&&e&&g&&i&&j){E(e,false);d(function(){g+="";i+="";var C={};if(t&&typeof t===w)for(var y in t)C[y]=t[y];C.data=
c;C.width=g;C.height=i;y={};if(r&&typeof r===w)for(var U in r)y[U]=r[U];if(o&&typeof o===w)for(var V in o)if(typeof y.flashvars!=q)y.flashvars+="&"+V+"="+o[V];else y.flashvars=V+"="+o[V];if(N(j)){U=F(C,y,e);C.id==e&&E(e,true);T.success=true;T.ref=U}else if(n&&G()){C.data=n;O(C,y,e,K);return}else E(e,true);K&&K(T)})}else K&&K(T)},switchOffAutoHideShow:function(){ea=false},ua:k,getFlashPlayerVersion:function(){return{major:k.pv[0],minor:k.pv[1],release:k.pv[2]}},hasFlashPlayerVersion:N,createSWF:function(c,
e,g){if(k.w3)return F(c,e,g)},showExpressInstall:function(c,e,g,i){k.w3&&G()&&O(c,e,g,i)},removeSWF:function(c){k.w3&&ca(c)},createCSS:function(c,e,g,i){k.w3&&da(c,e,g,i)},addDomLoadEvent:d,addLoadEvent:h,getQueryParamValue:function(c){var e=p.location.search||p.location.hash;if(e){if(/\?/.test(e))e=e.split("?")[1];if(c==null)return fa(e);e=e.split("&");for(var g=0;g<e.length;g++)if(e[g].substring(0,e[g].indexOf("="))==c)return fa(e[g].substring(e[g].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Q){var c=
v(ba);if(c&&I){c.parentNode.replaceChild(I,c);if(R){E(R,true);if(k.ie&&k.win)I.style.display="block"}W&&W(aa)}Q=false}}}}(),SWFUpload;if(SWFUpload==undefined)SWFUpload=function(b){this.initSWFUpload(b)};
SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(d){delete SWFUpload.instances[this.movieName];throw d;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";
SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};
SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(b){if(typeof b!=="string"||b.match(/^https?:\/\//i)||b.match(/^\//))return b;var d=window.location.pathname.lastIndexOf("/");path=d<=0?"/":window.location.pathname.substr(0,d)+"/";return path+b};a=SWFUpload.prototype;
a.initSettings=function(){this.ensureDefault=function(b,d){this.settings[b]=this.settings[b]==undefined?d:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types",
"*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",
null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(this.settings.prevent_swf_caching)this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime();if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=
SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};
a.loadFlash=function(){var b,d;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";b=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(b==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;d=document.createElement("div");d.innerHTML=this.getFlashHTML();b.parentNode.replaceChild(d.firstChild,b);if(window[this.movieName]==undefined)window[this.movieName]=
this.getMovieElement()};
a.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.settings.flash_url,'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+
this.getFlashVars()+'" />',"</object>"].join("")};
a.getFlashVars=function(){var b=this.buildParamString(),d=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(d),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",
encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};a.getMovieElement=function(){if(this.movieElement==undefined)this.movieElement=document.getElementById(this.movieName);if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement};
a.buildParamString=function(){var b=this.settings.post_params,d=[];if(typeof b==="object")for(var h in b)b.hasOwnProperty(h)&&d.push(encodeURIComponent(h.toString())+"="+encodeURIComponent(b[h].toString()));return d.join("&amp;")};
a.destroy=function(){try{this.cancelUpload(null,false);var b=null;if((b=this.getMovieElement())&&typeof b.CallFunction==="unknown"){for(var d in b)try{if(typeof b[d]==="function")b[d]=null}catch(h){}try{b.parentNode.removeChild(b)}catch(m){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return true}catch(f){return false}};
a.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",
this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",
this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",
this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",
(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n\tfile_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n\tfile_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n\tfile_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n\tupload_start_handler assigned:      ",(typeof this.settings.upload_start_handler===
"function").toString(),"\n\tupload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n\tupload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n\tupload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n\tupload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n\tdebug_handler assigned:             ",
(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};a.addSetting=function(b,d,h){return d==undefined?(this.settings[b]=h):(this.settings[b]=d)};a.getSetting=function(b){if(this.settings[b]!=undefined)return this.settings[b];return""};
a.callFlash=function(b,d){d=d||[];var h=this.getMovieElement(),m,f;try{f=h.CallFunction('<invoke name="'+b+'" returntype="javascript">'+__flash__argumentsToXML(d,0)+"</invoke>");m=eval(f)}catch(l){throw"Call to "+b+" failed";}if(m!=undefined&&typeof m.post==="object")m=this.unescapeFilePostParams(m);return m};a.selectFile=function(){this.callFlash("SelectFile")};a.selectFiles=function(){this.callFlash("SelectFiles")};a.startUpload=function(b){this.callFlash("StartUpload",[b])};
a.cancelUpload=function(b,d){if(d!==false)d=true;this.callFlash("CancelUpload",[b,d])};a.stopUpload=function(){this.callFlash("StopUpload")};a.getStats=function(){return this.callFlash("GetStats")};a.setStats=function(b){this.callFlash("SetStats",[b])};a.getFile=function(b){return typeof b==="number"?this.callFlash("GetFileByIndex",[b]):this.callFlash("GetFile",[b])};a.addFileParam=function(b,d,h){return this.callFlash("AddFileParam",[b,d,h])};
a.removeFileParam=function(b,d){this.callFlash("RemoveFileParam",[b,d])};a.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};a.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};a.addPostParam=function(b,d){this.settings.post_params[b]=d;this.callFlash("SetPostParams",[this.settings.post_params])};a.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};
a.setFileTypes=function(b,d){this.settings.file_types=b;this.settings.file_types_description=d;this.callFlash("SetFileTypes",[b,d])};a.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};a.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;this.callFlash("SetFileUploadLimit",[b])};a.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};
a.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};a.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};a.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};a.setHTTPSuccess=function(b){if(typeof b==="string")b=b.replace(" ","").split(",");this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};
a.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])};a.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};a.setButtonImageURL=function(b){if(b==undefined)b="";this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};
a.setButtonDimensions=function(b,d){this.settings.button_width=b;this.settings.button_height=d;var h=this.getMovieElement();if(h!=undefined){h.style.width=b+"px";h.style.height=d+"px"}this.callFlash("SetButtonDimensions",[b,d])};a.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};a.setButtonTextPadding=function(b,d){this.settings.button_text_top_padding=d;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,d])};
a.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};a.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};a.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};a.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};
a.queueEvent=function(b,d){if(d==undefined)d=[];else d instanceof Array||(d=[d]);var h=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,d)});setTimeout(function(){h.executeNextEvent()},0)}else if(this.settings[b]!==null)throw"Event handler "+b+" is unknown or is not a function";};a.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;typeof b==="function"&&b.apply(this)};
a.unescapeFilePostParams=function(b){var d=/[$]([0-9a-f]{4})/i,h={},m;if(b!=undefined){for(var f in b.post)if(b.post.hasOwnProperty(f)){m=f;for(var l;(l=d.exec(m))!==null;)m=m.replace(l[0],String.fromCharCode(parseInt("0x"+l[1],16)));h[m]=b.post[f]}b.post=h}return b};a.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(b){return false}};a.flashReady=function(){var b=this.getMovieElement();if(b){this.cleanUp(b);this.queueEvent("swfupload_loaded_handler")}else this.debug("Flash called back ready but the flash movie can't be found.")};
a.cleanUp=function(b){try{if(this.movieElement&&typeof b.CallFunction==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var d in b)try{if(typeof b[d]==="function")b[d]=null}catch(h){}}}catch(m){}window.__flash__removeCallback=function(f,l){try{if(f)f[l]=null}catch(s){}}};a.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};
a.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};a.fileQueueError=function(b,d,h){b=this.unescapeFilePostParams(b);this.queueEvent("file_queue_error_handler",[b,d,h])};a.fileDialogComplete=function(b,d,h){this.queueEvent("file_dialog_complete_handler",[b,d,h])};a.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};
a.returnUploadStart=function(b){var d;if(typeof this.settings.upload_start_handler==="function"){b=this.unescapeFilePostParams(b);d=this.settings.upload_start_handler.call(this,b)}else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";if(d===undefined)d=true;d=!!d;this.callFlash("ReturnUploadStart",[d])};a.uploadProgress=function(b,d,h){b=this.unescapeFilePostParams(b);this.queueEvent("upload_progress_handler",[b,d,h])};
a.uploadError=function(b,d,h){b=this.unescapeFilePostParams(b);this.queueEvent("upload_error_handler",[b,d,h])};a.uploadSuccess=function(b,d,h){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,d,h])};a.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)};a.debug=function(b){this.queueEvent("debug_handler",b)};
a.debugMessage=function(b){if(this.settings.debug){var d=[];if(typeof b==="object"&&typeof b.name==="string"&&typeof b.message==="string"){for(var h in b)b.hasOwnProperty(h)&&d.push(h+": "+b[h]);b=d.join("\n")||"";d=b.split("\n");b="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(b)}else SWFUpload.Console.writeLine(b)}};SWFUpload.Console={};
SWFUpload.Console.writeLine=function(b){var d,h;try{d=document.getElementById("SWFUpload_Console");if(!d){h=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(h);d=document.createElement("textarea");d.id="SWFUpload_Console";d.style.fontFamily="monospace";d.setAttribute("wrap","off");d.wrap="off";d.style.overflow="auto";d.style.width="700px";d.style.height="350px";d.style.margin="5px";h.appendChild(d)}d.value+=b+"\n";d.scrollTop=d.scrollHeight-d.clientHeight}catch(m){alert("Exception: "+
m.name+" Message: "+m.message)}};
(function(b){var d=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"],h=[];b.fn.swfupload=function(){var m=b.makeArray(arguments);return this.each(function(){var f;if(m.length==1&&typeof m[0]=="object"){f=b(this).data("__swfu");if(!f){var l=m[0],s=b(this);f=[];b.merge(f,
d);b.merge(f,h);b.each(f,function(O,P){var J=P.replace(/_handler$/,"").replace(/_([a-z])/g,function(F,X){return X.toUpperCase()});l[P]=function(){var F=b.Event(J);s.trigger(F,b.makeArray(arguments));return!F.isDefaultPrevented()}});b(this).data("__swfu",new SWFUpload(l))}}else if(m.length>0&&typeof m[0]=="string"){var G=m.shift();(f=b(this).data("__swfu"))&&f[G]&&f[G].apply(f,m)}})};b.swfupload={additionalHandlers:function(){if(arguments.length===0)return h.slice();else b(arguments).each(function(m,
f){b.merge(h,b.makeArray(f))})},defaultHandlers:function(){return d.slice()},getInstance:function(m){return b(m).data("__swfu")}}})(jQuery);function PandaUploader(){}PandaUploader.supportAjaxUpload=function(){var b=document.createElement("INPUT");b.type="file";return"files"in b};PandaUploader.supportAjaxProgressEvents=function(){return typeof XDomainRequest!="undefined"?true:typeof XMLHttpRequest!="undefined"?"withCredentials"in new XMLHttpRequest:null};
PandaUploader.createXRequestObject=function(){if(typeof XDomainRequest!="undefined")return new XDomainRequest;else if(typeof XMLHttpRequest!="undefined"){var b=new XMLHttpRequest;return"withCredentials"in b?b:null}else return null};PandaUploader.createWidget=function(){return PandaUploader.supportAjaxUpload()&&PandaUploader.supportAjaxUpload?PandaUploader.HTML5Widget:PandaUploader.FlashWidget};PandaUploader.bind=function(b,d){return function(){var h=b[d];if(h)return h.apply(b,arguments)}};
PandaUploader.alert=function(b){return alert(b)};PandaUploader.BaseWidget=function(b,d,h){this.query=b;this.signed_params=d;this.options=h};
PandaUploader.BaseWidget.prototype={setUploadStrategy:function(){throw"Unimplemented method setUploadStrategy()";},getForm:function(){throw"Unimplemented method getForm()";},start:function(){throw"Unimplemented method start()";},disable:function(){throw"Unimplemented method disable()";},enable:function(){throw"Unimplemented method enable()";},cancel:function(){throw"Unimplemented method cancel()";},setValue:function(){throw"Unimplemented method setValue()";},getValue:function(){throw"Unimplemented method getValue()";
}};
PandaUploader.FlashWidget=function(b,d,h,m){PandaUploader.BaseWidget.apply(this,[b,d,h]);m=m===undefined?{}:m;this.swfupload=b.swfupload(jQuery.extend({upload_url:h.api_url+"/videos.json",file_size_limit:0,file_types:"*.*",file_types_description:"All Files",file_upload_limit:0,flash_url:h.uploader_dir+"/swfupload.swf",button_image_url:h.uploader_dir+"/choose_file_button.png",button_width:87,button_height:27,button_placeholder_id:h.upload_button_id,file_post_name:"file",debug:false},m));if(this.unique_id===undefined)this.unique_id=
1;this.unique_id++;var f=this.swfupload;this.swfupload.bind("fileQueued",function(){f.data("__swfu").setPostParams(d.call?d():d)})};PandaUploader.FlashWidget.prototype=new PandaUploader.BaseWidget;a=PandaUploader.FlashWidget.prototype;a.constructor=PandaUploader.FlashWidget;
a.setUploadStrategy=function(b){this.upload_strategy=b;this.swfupload.bind("swfuploadLoaded",PandaUploader.bind(b,"onwidgetload"));this.swfupload.bind("fileQueued",PandaUploader.bind(this,"fileQueued"));this.swfupload.bind("uploadStart",PandaUploader.bind(b,"onloadstart"));this.swfupload.bind("uploadProgress",PandaUploader.bind(this,"uploadProgress"));this.swfupload.bind("uploadSuccess",PandaUploader.bind(this,"uploadSuccess"));this.swfupload.bind("uploadError",PandaUploader.bind(b,"onerror"))};
a.fileQueued=function(b,d){this.file=d;this.upload_strategy.onchange()};a.uploadProgress=function(b,d,h,m){b.loaded=h;b.total=m;this.upload_strategy.onprogress(b)};a.uploadSuccess=function(b,d,h){this.upload_strategy.onreadystatechange({target:{status:"200",responseText:h}})};a.getFile=function(){return this.file};a.getForm=function(){return this.swfupload.parents("form").get(0)};a.start=function(){return this.swfupload.swfupload("startUpload")};
a.disable=function(){return this.swfupload.swfupload("setButtonDisabled",true)};a.enable=function(){return this.swfupload.swfupload("setButtonDisabled",false)};a.cancel=function(){return this.swfupload.swfupload("cancelUpload","",false)};a.setValue=function(b){return this.swfupload.val(b)};a.getValue=function(){return this.swfupload.val()};PandaUploader.HTML5Widget=function(b,d,h){PandaUploader.BaseWidget.apply(this,[b,d,h])};PandaUploader.HTML5Widget.prototype=new PandaUploader.BaseWidget;a=PandaUploader.HTML5Widget.prototype;
a.constructor=PandaUploader.HTML5Widget;
a.setUploadStrategy=function(b){this.upload_strategy=b;this.xhr=PandaUploader.createXRequestObject();this.xhr.upload.addEventListener("loadstart",PandaUploader.bind(b,"onloadstart"),false);this.xhr.upload.addEventListener("progress",PandaUploader.bind(b,"onprogress"),false);this.xhr.upload.addEventListener("load",PandaUploader.bind(b,"onload"),false);this.xhr.upload.addEventListener("error",PandaUploader.bind(b,"onerror"),false);this.xhr.upload.addEventListener("abort",PandaUploader.bind(b,"onabort"),
false);this.xhr.addEventListener("readystatechange",PandaUploader.bind(b,"onreadystatechange"),false);$("#"+this.options.upload_button_id).append('<input type="file" />');$(this.getField()).change(PandaUploader.bind(b,"onchange"));b.onwidgetload()};a.getForm=function(){return this.query.parents("form").get(0)};
a.start=function(){var b=this.getFile(),d='{"access_key":"'+this.signed_params.access_key+'", "cloud_id":"'+this.signed_params.cloud_id+'", "timestamp":"'+this.signed_params.timestamp+'", "signature":"'+this.signed_params.signature+'"}';this.xhr.open("POST",this.options.api_url+"/videos.json",true);this.xhr.setRequestHeader("Cache-Control","no-cache");this.xhr.setRequestHeader("Content-Type","application/octet-stream");this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xhr.setRequestHeader("X-File-Name",
b.fileName);this.xhr.setRequestHeader("X-Panda-Params",d);this.xhr.send(b)};a.getFile=function(){return $(this.getField()).get(0).files[0]};a.setValue=function(b){return this.query.val(b)};a.disable=function(){$(this.getField()).attr("disabled",true)};a.enable=function(){$(this.getField()).removeAttr("disabled")};a.getField=function(){return $("#"+this.options.upload_button_id).find("input[type=file]").get(0)};
(function(){function b(f){this.options=f}function d(f){b.apply(this,[f])}function h(f){b.apply(this,[f])}function m(f){this.options=f;this.$p=jQuery("#"+this.options.upload_progress_id);this.$p.css("display","none");this.count=0}UPLOADING=0;STOP=1;jQuery.fn.checkPandaUploaderOptions=function(f,l){var s=this.parents("form")[0];if(f===undefined){PandaUploader.alert("There was an error setting up the upload form. (The upload parameters were not specified).");return false}if(l.upload_button_id===undefined){PandaUploader.alert("You have to specify the button id");
return false}if(this.size()==0){PandaUploader.alert("The jQuery element is empty. Method pandaUploader() cannot be executed");return false}if(!s){PandaUploader.alert("Could not find a suitable form. Please place the call to pandaUploader() after the form, or to be executed onload().");return false}if($(s).find("[name=submit], #submit").length!=0){PandaUploader.alert('An element of your video upload form is incorrect (most probably the submit button). Neither NAME nor ID can be set to "submit" on any field.');
return false}return true};jQuery.fn.pandaUploader=function(f,l,s){l=l===undefined?{}:l;if(!this.checkPandaUploaderOptions(f,l))return false;l=jQuery.extend({upload_filename_id:null,upload_progress_id:null,api_host:"api.pandastream.com",progress_handler:null,uploader_dir:"/panda_uploader",disable_submit_button:true,strategy:"upload_on_submit",widget:null},l);l.api_url=l.api_url||"http://"+l.api_host+"/v2";if(!l.progress_handler)l.progress_handler=new m(l);if(!l.widget)l.widget=PandaUploader.createWidget();
f=new l.widget(this,f,l,s);s=null;switch(l.strategy){case "upload_on_submit":s=d;break;case "upload_on_select":s=h;break;default:s=l.strategy}strategy=new s(l);strategy.setUploadWidget(f);f.setUploadStrategy(strategy);(l=jQuery("#"+l.upload_cancel_button_id))&&l.click(PandaUploader.bind(strategy,"onCancel"));return this};b.prototype={setUploadWidget:function(f){this.widget=f},disableSubmitButton:function(){$(this.getSubmitButton()).attr("disabled",true)},enableSubmitButton:function(){return $(this.getSubmitButton()).removeAttr("disabled")},
getSubmitButton:function(){return $(this.widget.getForm()).find("input[type=submit]")},onwidgetload:function(){},onchange:function(){},onloadstart:function(){},onprogress:function(f){try{this.options.progress_handler&&this.options.progress_handler.setProgress(this.widget.getFile(),f.loaded,f.total)}catch(l){}},onload:function(){},onerror:function(){},onabort:function(){},onsubmit:function(){}};d.prototype=new b;d.prototype.constructor=d;d.prototype.onchange=function(){var f=$("#"+this.options.upload_filename_id);
if(f.size()!=0){f.val(this.widget.getFile().name);this.enableSubmitButton()}};d.prototype.onwidgetload=function(){$(this.widget.getForm()).submit(PandaUploader.bind(this,"onsubmit"));this.options.disable_submit_button&&this.disableSubmitButton()};d.prototype.onloadstart=function(){this.widget.disable();this.options.progress_handler.reset();this.disableSubmitButton();this.options.progress_handler&&this.options.progress_handler.start(this.widget.getFile())};d.prototype.onreadystatechange=function(f){var l=
null;try{l=f.target.status}catch(s){return}if(l=="200"&&f.target.responseText){this.widget.setValue(jQuery.parseJSON(f.target.responseText).id);this.widget.getForm().submit()}};d.prototype.onerror=function(){$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset()};d.prototype.onabort=function(){this.widget.cancel();this.widget.enable();$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset();this.options.disableSubmitButton&&this.disableSubmitButton()};
d.prototype.onsubmit=function(){this.widget.start();return false};h.prototype=new b;h.prototype.constructor=h;h.prototype.onchange=function(){var f=$("#"+this.options.upload_filename_id);if(f.size()!=0){f.val(this.widget.getFile().name);this.widget.start()}};h.prototype.onloadstart=function(){this.options.progress_handler.reset();this.disableSubmitButton();this.options.progress_handler&&this.options.progress_handler.start(this.widget.getFile())};h.prototype.onabort=function(){this.cancel();this.enable();
$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset();this.options.disableSubmitButton&&this.disableSubmitButton()};h.prototype.onerror=function(){$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset()};h.prototype.onreadystatechange=function(f){var l=null;try{l=f.target.status}catch(s){return}if(l=="200"&&f.target.responseText){this.widget.setValue(jQuery.parseJSON(f.target.responseText).id);this.enableSubmitButton()}};m.prototype={start:function(f){this.count=
0;if(this.$p.size()!=0){this.$p.find(".progress-inside").size()==0&&this.$p.append('<div class="progress-inside"></div>');this.progress=this.$p.find(".progress-inside");this.setProgress(f,0,f.size);this.$p.css("display","block");var l=this;this.timer=setInterval(function(){l.animateBarBg()},20)}},setProgress:function(f,l,s){if(this.progress){f=Math.ceil(l*100/s);$(this.progress).css("width",f+"%")}},animateBarBg:function(){this.count++;var f=this.$p.css("background-position");f=f?f.split(" "):0;if(this.count==
37){this.count=0;this.$p.css("background-position",f+36+"px 0px")}else this.$p.css("background-position",f-1+"px 0px")},reset:function(){clearInterval(this.timer);$(this.progress).css("width","0%");this.$p.css("display","none")}}})();
